

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Extended Age Query (EAQ) Design &amp; Implementation &mdash; Specify Developer Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Removing a Specify Cloud Instance" href="../misc/remove_specify_cloud_instance.html" />
    <link rel="prev" title="Collection Object Groups (COG) Design &amp; Implementation" href="cog.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Specify Developer Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Guidelines:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../processes/github_guidelines.html"><strong>GitHub Guidelines and Process</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../processes/support_guidelines.html">Support Staff Expectations &amp; Best Practices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Launching a Release:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../processes/release_process.html">Release Process for Hosted Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processes/release_notes.html">Create Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Amazon Web Services:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aws/aws_automation.html">AWS Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/aws_infrastructure_notes.html">AWS Infrastructure Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/aws_specify_asset_server_setup.html">AWS Specify Asset Server Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/aws_specify_cloud_setup.html">Specify Cloud Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/client_migration_notes.html">Digital Ocean to AWS migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/ec2_rds_specify7_setup.html">Deploy Specify7 to an EC2 instance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/add_new_instance_to_specify_cloud.html">Add new Specify instance to Specify Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/specify_cloud_graviton_setup.html">Specify Cloud Graviton Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/remote_db_connection.html">Setup remote database connection to local mysql workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/web-portal-docker.html">Web Portal using Docker</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Asset Server:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asset_server/asset_config_files.html">Specify 7 Docker Config Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asset_server/asset_server_config.html">Asset Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asset_server/asset_server_setup.html">EC2 Non-Dockerized Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asset_server/hybrid_asset_server_setup.html">Hybrid Asset Server Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Server Management:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../server_management/managed_servers.html">Updown Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/managed_servers.html#managed-servers">Managed Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/managed_servers.html#accessing-specify-7-deployments">Accessing Specify 7 Deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/managed_servers.html#accessing-backups-on-aws-rds">Accessing Backups on AWS RDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/specify_ssh_docker_guide.html">Specify Test Panel User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/add_user_to_EC2.html">Server Access Management Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/check_asset_usage.html">Check Asset Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/exoscale.html">Exoscale Hosted Instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/exoscale_backups.html">Backups on Exoscale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/kuit_ssl_certs.html">New certificate on biprdsp7wbdb.cc.ku.edu server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/kuit_ssl_certs.html#web-portal-certificate">web-portal certificate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/kuit_ssl_certs.html#specify-ku-edu-ssl-cert-update">specify.ku.edu ssl cert update</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_management/reports.html">Hosting Reports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Internal Processes:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_process/specify_processes.html">Specify Development Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_process/project_docs.html">Project (Github pages) documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_process/dbgroups.html">Databases with Specific Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_process/individualdbs.html">Individual Database Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_process/dev_expectations.html">Developer Expectations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_process/developeronboarding.html">Developer Onboarding – Specify Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_process/dev_support_process.html">Dev Support Process</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../security/aws_security.html">AWS Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/fix_exposed_secret.html">Fix Exposed Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/monitoring.html">Security Monitoring</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testing:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/pull_requests.html">Pull Request Testing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Specify Software:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/membership.html">Membership</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/disciplines.html">Discipline support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/hosting.html">Specify Cloud Hosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/migration.html">Data Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/training.html">Specify Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/workbench.html">Specify Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_desc/workflows.html">Common Workflows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Utils:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_utils/writing_migrations.html">Writing Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_utils/setting_up_backend_debugger.html">Setting Up Backend Debugger in VS Code for Specify 7</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Decisions:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="component_extension.html">Component Extension to Collection Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_edit.html">Batch Edit</a></li>
<li class="toctree-l1"><a class="reference internal" href="cog.html">Collection Object Groups (COG) Design &amp; Implementation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Extended Age Query (EAQ) Design &amp; Implementation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#core-logic-filtering-criteria">Core Logic &amp; Filtering Criteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-interface-workflow">User Interface &amp; Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#search-scope-across-age-fields">Search Scope Across Age Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mvp-scope">MVP Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary-table">Summary Table</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/remove_specify_cloud_instance.html">Removing a Specify Cloud Instance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/documentation.html">Informatics Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/kuit_notes.html">Working with central KU IT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/specify7_ecs_most-in-one.html">Create a Most-In-One Specify Docker image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/useful_bash_cmds.html">Useful bash commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/vs_code_django_unit_test_debugging_notes.html">VS Code Django Unit Test Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/branch_from_tag.html">Create a branch from a tagged release</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Specify Developer Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Extended Age Query (EAQ) Design &amp; Implementation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/technical_decisions/extended_age_query.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="extended-age-query-eaq-design-implementation">
<h1>Extended Age Query (EAQ) Design &amp; Implementation<a class="headerlink" href="#extended-age-query-eaq-design-implementation" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The Extended Age Query (EAQ) feature enhances query capabilities for <strong>Collection Objects (COs)</strong> in the Query Builder by enabling filters based on geological age. Available in Geology, Invertebrate Paleontology, and Vertebrate Paleontology disciplines, EAQ supports both named time periods and explicit numerical ranges using start/end values (in Millions of Years Ago, MYA).</p>
</section>
<section id="core-logic-filtering-criteria">
<h2>Core Logic &amp; Filtering Criteria<a class="headerlink" href="#core-logic-filtering-criteria" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Numeric-Based Logic</strong><br />
EAQ exclusively uses numerical start and end values; no names are directly used for computation—names are converted into numeric ranges by the system.</p></li>
<li><p><strong>Valid Periods Only</strong><br />
Only Chronostratigraphy nodes from the <code class="docutils literal notranslate"><span class="pre">GeologicTimePeriod</span></code> table with valid <code class="docutils literal notranslate"><span class="pre">StartPeriod</span></code> and <code class="docutils literal notranslate"><span class="pre">EndPeriod</span></code> values (where StartPeriod &gt; EndPeriod) are considered for queries.</p></li>
<li><p><strong>Range Calculation</strong><br />
The query computes its range using:</p>
<ul>
<li><p><strong>Lowest</strong> <code class="docutils literal notranslate"><span class="pre">EndPeriod</span></code> across relevant nodes</p></li>
<li><p><strong>Highest</strong> <code class="docutils literal notranslate"><span class="pre">StartPeriod</span></code> across relevant nodes<br />
Because MYA increases into the past, higher StartPeriod means older boundary.</p></li>
</ul>
</li>
</ul>
</section>
<section id="user-interface-workflow">
<h2>User Interface &amp; Workflow<a class="headerlink" href="#user-interface-workflow" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Add Age Field</strong><br />
In the Query Builder, users select “Age” on their Collection Object query.</p></li>
<li><p><strong>Select Query Method</strong></p>
<ul class="simple">
<li><p><strong>Name</strong>: User enters a geological time period name, which the system converts into start/end values and displays the name in the UI.</p></li>
<li><p><strong>Range</strong>: User enters explicit start and end numeric values (e.g., <code class="docutils literal notranslate"><span class="pre">15</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code> for 15–5 MYA).</p></li>
</ul>
</li>
<li><p><strong>Choose Search Mode</strong></p>
<ul class="simple">
<li><p><strong>Strict</strong>: Returns COs whose entire age range lies within the specified window.</p></li>
<li><p><strong>Non-strict</strong>: Returns COs whose age ranges overlap at all with the specified window.</p></li>
</ul>
</li>
<li><p><strong>Execute Query</strong><br />
The system determines the applicable age range using either the named period or numeric values and filters results accordingly.</p></li>
</ol>
</section>
<section id="search-scope-across-age-fields">
<h2>Search Scope Across Age Fields<a class="headerlink" href="#search-scope-across-age-fields" title="Link to this heading"></a></h2>
<p>EAQ applies to the following age contexts within Collection Objects:</p>
<ul class="simple">
<li><p><strong>Relative Age</strong><br />
Uses <code class="docutils literal notranslate"><span class="pre">AgeNameID</span></code> (FK to <code class="docutils literal notranslate"><span class="pre">GeologicTimePeriod</span></code>) to establish a chronostratigraphic linkage and then applies the underlying start/end values.</p></li>
<li><p><strong>Absolute Age</strong><br />
Computes a range using: AbsoluteAge + AgeUncertainty to AbsoluteAge – AgeUncertainty</p></li>
<li><p><strong>Paleo Context</strong><br />
Bound by <code class="docutils literal notranslate"><span class="pre">ChronosStratID</span></code> (and optionally <code class="docutils literal notranslate"><span class="pre">ChronosStratEndID</span></code>). The system determines the widest combined range across both IDs using start/end values.</p></li>
</ul>
<p>These three contexts are searched independently according to their respective logic.</p>
</section>
<section id="mvp-scope">
<h2>MVP Scope<a class="headerlink" href="#mvp-scope" title="Link to this heading"></a></h2>
<p>For the Minimum Viable Product (MVP), the EAQ will only operate on <strong>Collection Objects</strong>.</p>
</section>
<section id="summary-table">
<h2>Summary Table<a class="headerlink" href="#summary-table" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Numeric Logic Only</p></td>
<td><p>Only start/end MYA values are used—names are converted internally</p></td>
</tr>
<tr class="row-odd"><td><p>Valid Periods Only</p></td>
<td><p>Filters apply only to Chronostrat nodes with valid start/end values</p></td>
</tr>
<tr class="row-even"><td><p>Range Computation</p></td>
<td><p>Uses lowest EndPeriod and highest StartPeriod for range boundaries</p></td>
</tr>
<tr class="row-odd"><td><p>Query Methods</p></td>
<td><p>Supports both named period and explicit numeric range input</p></td>
</tr>
<tr class="row-even"><td><p>Strict vs Non-strict</p></td>
<td><p>Determines whether results must fully fall within or just overlap range</p></td>
</tr>
<tr class="row-odd"><td><p>Search Contexts</p></td>
<td><p>Applies across Relative Age, Absolute Age, and Paleo Context</p></td>
</tr>
<tr class="row-even"><td><p>Availability</p></td>
<td><p>Limited to Collection Object queries for MVP</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cog.html" class="btn btn-neutral float-left" title="Collection Object Groups (COG) Design &amp; Implementation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../misc/remove_specify_cloud_instance.html" class="btn btn-neutral float-right" title="Removing a Specify Cloud Instance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Specify Collections Consortium Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>